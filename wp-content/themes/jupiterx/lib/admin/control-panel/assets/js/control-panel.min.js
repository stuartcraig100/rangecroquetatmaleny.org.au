"use strict";!function(c){c("#js__jupiterx-cp-wrap");var r=!1;window.onbeforeunload=function(t){var e;if(t=t||window.event,0<r)return t.returnValue=e};var t=function(){c('[data-toggle="tooltip"]').tooltip(),c('[data-toggle="popover"]').click(function(t){t.preventDefault()}),c('[data-toggle="popover"]').popover({trigger:"hover"})};e(),i(),t(),c(window).on("control_panel_pane_loaded",i),c(window).on("control_panel_pane_loaded",e),c(window).on("control_panel_pane_loaded",t);var n={trigger_pane:function(t){t.preventDefault();var e=c(this).attr("href"),a=(window.location.hash=e).substring(1,e.length);n.get_pane(e,a)},get_pane:function(e,t){var a=c("#js__jupiterx-cp-panes");a.addClass("loading-pane");var n={action:"jupiterx_cp_load_pane_action",slug:t};c.post(ajaxurl,n,function(t){a.empty(),a.append(t.data),a.removeClass("loading-pane"),c(".jupiterx-cp-sidebar-list-items").removeClass("jupiterx-is-active"),c("[href="+e+"]").parent().addClass("jupiterx-is-active"),c(window).trigger("control_panel_pane_loaded")})},get_pane_on_load:function(){var t=window.location.hash;if(0<t.length){var e=t.substring(1,t.length);n.get_pane(t,e)}},call_to_register:function(){0<c(".jupiterx-call-to-register-product").length&&(window.location=window.location.href.split("#")[0])}};function o(){c("#js__jupiterx-cp-wrap:not(.jupiterx-call-to-register-product) .js__cp-sidebar-link").off().on("click",n.trigger_pane)}function e(){c(".jupiterx-setup-wizard-hide-notice").on("click",function(t){t.preventDefault(),c(this).attr("disabled","disabled"),c.ajax({type:"POST",url:ajaxurl,data:{action:"jupiterx_setup_wizard_hide_notice"},beforeSend:function(){c(".jupiterx-setup-wizard-message").fadeOut(400)}})}),c("#js__regiser-api-key-btn").on("click",function(t){t.preventDefault();var e=c("#jupiterx-cp-register-api-input").val();if(0===e.length)return!1;jupiterx_modal({title:jupiterx_cp_textdomain.registering_theme,text:jupiterx_cp_textdomain.wait_for_api_key_registered,type:"",cancelButtonText:jupiterx_cp_textdomain.discard,showCancelButton:!0,showConfirmButton:!1,showCloseButton:!1,showLearnmoreButton:!1,progress:"100%",showProgress:!0,indefiniteProgress:!0});var a={action:"jupiterx_cp_register_revoke_api_action",method:"register",api_key:e,security:c("#security").val()};c.post(ajaxurl,a,function(t){!0===(t=JSON.parse(t)).status?(jupiterx_modal({title:jupiterx_cp_textdomain.thanks_registering,text:t.message,type:"success",showCancelButton:!1,showConfirmButton:!0,showCloseButton:!1,showLearnmoreButton:!1,showProgress:!1,indefiniteProgress:!0}),c(".jupiterx-wrap").removeClass("jupiterx-call-to-register-product"),c(".get-api-key-form").addClass("d-none"),c(".remove-api-key-form").removeClass("d-none"),o()):jupiterx_modal({title:jupiterx_cp_textdomain.registeration_unsuccessful,text:t.message,type:"error",showCancelButton:!1,showConfirmButton:!0,showCloseButton:!1,showLearnmoreButton:!1,showProgress:!1,onConfirm:function(){c("#jupiterx-cp-register-api-input").val("")}})})}),c("#js__revoke-api-key-btn").on("click",function(t){t.preventDefault(),jupiterx_modal({title:jupiterx_cp_textdomain.revoke_API_key,text:jupiterx_cp_textdomain.you_are_about_to_remove_API_key,type:"warning",showCancelButton:!0,showConfirmButton:!0,showLearnmoreButton:!1,confirmButtonText:jupiterx_cp_textdomain.ok,cancelButtonText:jupiterx_cp_textdomain.cancel,onConfirm:function(){var t={action:"jupiterx_cp_register_revoke_api_action",method:"revoke",security:c("#security").val()};c.post(ajaxurl,t,function(t){!0===(t=JSON.parse(t)).status&&(c("#jupiterx-cp-register-api-input").val(""),c(".jupiterx-wrap").addClass("jupiterx-call-to-register-product"),c(".get-api-key-form").removeClass("d-none"),c(".remove-api-key-form").addClass("d-none"),c(".js__cp-sidebar-link").unbind("click"))})}})})}c(window).on("control_panel_pane_loaded",n.call_to_register),c(document).ready(n.get_pane_on_load),o(),c(window).on("control_panel_pane_loaded",o);var s={init:function(){0!=c("#jupiterx-cp-plugins").length&&(s.get_installed_plugin_list(),s.get_new_plugin_list(),c(document).on("click",".abb_plugin_activate",s.activate_init),c(document).on("click",".abb_plugin_deactivate",s.deactivate_init),c(document).on("click",".abb_plugin_update",s.update_plugin))},get_installed_plugin_list:function(){var e={action:"abb_installed_plugins"};c.post(ajaxurl,e,function(t){console.log("Install Plugin :",e," Response :",t),c("#js__jupiterx-installed-plugins").html(""),1==t.status?c.each(t.data,function(t,e){c("#js__jupiterx-installed-plugins").append(s.get_installed_list_template(e))}):jupiterx_modal({title:jupiterx_cp_textdomain.oops,text:t.message,type:"error",showCancelButton:!1,showConfirmButton:!0,showLearnmoreButton:!1})})},get_new_plugin_list:function(){var e={action:"abb_lazy_load_plugin_list"};c.post(ajaxurl,e,function(t){console.log("Get Plugin :",e," Response :",t),c("#js__jupiterx-new-plugins").html(""),1==t.status?(0<t.data.length&&c.each(t.data,function(t,e){c("#js__jupiterx-new-plugins").append(s.get_new_list_template(e))}),s.toggle_new_plugin_title()):jupiterx_modal({title:jupiterx_cp_textdomain.oops,text:t.message,type:"error",showCancelButton:!1,showConfirmButton:!0,showLearnmoreButton:!1})})},get_installed_list_template:function(t){var e="",a="";return 1==t.update_needed&&(e+='<a href="#" class="jupiterx-cp-plugin-update-button btn btn-success mr-2 abb_plugin_update" data-slug="'+t.slug+'" href="#" data-name="'+t.name+'">'+jupiterx_cp_textdomain.update+"</a>",a='<span class="jupiterx-cp-plugin-update-tag">Update Available</span>'),e+='<a href="#" class="btn btn-outline-danger abb_plugin_deactivate" data-slug="'+t.slug+'" href="#" data-name="'+t.name+'">'+jupiterx_cp_textdomain.deactivate+"</a>",'<div class="jupiterx-cp-plugin-item"><div class="jupiterx-cp-plugin-item-inner jupiterx-card"><div class="jupiterx-card-body"><figure class="jupiterx-cp-plugin-item-thumb"><img src="'+t.img_url+'"></figure><span class="jupiterx-cp-plugin-item-required is-active-'+t.required+'">'+jupiterx_cp_textdomain.required+'</span><span class="jupiterx-cp-plugin-item-version">Version <span class="item-version-tag">'+t.version+'</span></span><div class="jupiterx-cp-plugin-item-meta"><div class="jupiterx-cp-plugin-item-name">'+t.name+"</div>"+a+'<div class="jupiterx-cp-plugin-item-desc">'+t.desc+"</div></div>"+e+"</div></div></div>"},get_new_list_template:function(t){return'<div class="jupiterx-cp-plugin-item"><div class="jupiterx-cp-plugin-item-inner jupiterx-card"><div class="jupiterx-card-body"><figure class="jupiterx-cp-plugin-item-thumb"><img src="'+t.img_url+'"></figure><span class="jupiterx-cp-plugin-item-required is-active-'+t.required+'">'+jupiterx_cp_textdomain.required+'</span><span class="jupiterx-cp-plugin-item-version">Version <span class="item-version-tag">'+t.version+'</span></span><div class="jupiterx-cp-plugin-item-meta"><div class="jupiterx-cp-plugin-item-name">'+t.name+'</div><div class="jupiterx-cp-plugin-item-desc">'+t.desc+'</div></div><a class="btn btn-primary abb_plugin_activate" data-slug="'+t.slug+'" href="#" data-name="'+t.name+'">'+jupiterx_cp_textdomain.activate+"</a></div></div></div>"},activate_init:function(t){t.preventDefault();var e=c(this);jupiterx_modal({title:jupiterx_cp_textdomain.installing_notice,text:s.language(jupiterx_cp_textdomain.are_you_sure_you_want_to_install,[e.data("name")]),type:"warning",showCancelButton:!0,showConfirmButton:!0,confirmButtonText:jupiterx_cp_textdomain.conitune,showCloseButton:!1,showLearnmoreButton:!1,showProgress:!1,onConfirm:function(){s.activate_start(e.data("slug"))}})},activate_start:function(t){var e=c('.abb_plugin_activate[data-slug="'+t+'"]'),a=e.data("name"),n={action:"abb_install_plugin",abb_controlpanel_plugin_name:a,abb_controlpanel_plugin_slug:t};jupiterx_modal({title:jupiterx_cp_textdomain.activating_plugin,text:jupiterx_cp_textdomain.wait_for_plugin_activation,type:"",showCancelButton:!1,showConfirmButton:!1,showCloseButton:!1,showLearnmoreButton:!1,progress:"100%",showProgress:!0,indefiniteProgress:!0}),c.ajax({type:"POST",url:ajaxurl,data:n,dataType:"json",timeout:6e4,success:function(t){if(console.log("Install Plugin :",n," Response :",t),t.hasOwnProperty("status")){if(1==t.status)return e.closest(".jupiterx-cp-plugin-item").prependTo("#js__jupiterx-installed-plugins"),e.removeClass("btn-primary").addClass("btn-outline-danger"),e.html(jupiterx_cp_textdomain.remove),e.addClass("abb_plugin_deactivate").removeClass("abb_plugin_activate"),s.toggle_new_plugin_title(),jupiterx_modal({title:jupiterx_cp_textdomain.all_done,text:s.language(jupiterx_cp_textdomain.item_is_successfully_installed,[a]),type:"success",showCancelButton:!1,showConfirmButton:!0,showCloseButton:!1,showLearnmoreButton:!1,showProgress:!1,indefiniteProgress:!0}),!0;jupiterx_modal({title:jupiterx_cp_textdomain.oops,text:t.message,type:"error",showCancelButton:!1,showConfirmButton:!0,showCloseButton:!1,showLearnmoreButton:!1,showProgress:!1,onConfirm:function(){c("#jupiterx-cp-register-api-input").val("")}}),jupiterx_modal({title:jupiterx_cp_textdomain.oops,text:t.message,type:"error",showCancelButton:!1,showConfirmButton:!0,showLearnmoreButton:!1})}else jupiterx_modal({title:jupiterx_cp_textdomain.oops,text:jupiterx_cp_textdomain.something_wierd_happened_please_retry_again,type:"error",showCancelButton:!1,showConfirmButton:!0,showLearnmoreButton:!1})},error:function(t,e,a){s.request_error_handling(t,e,a)}})},deactivate_init:function(t){t.preventDefault();var e=c(this);jupiterx_modal({title:s.language(jupiterx_cp_textdomain.important_notice,[]),text:s.language(jupiterx_cp_textdomain.are_you_sure_you_want_to_remove_plugin,[e.data("name")]),type:"warning",showCancelButton:!0,showConfirmButton:!0,confirmButtonText:s.language(jupiterx_cp_textdomain.conitune,[]),showCloseButton:!1,showLearnmoreButton:!1,showProgress:!1,onConfirm:function(){s.deactivate_start(e.data("slug"))}})},deactivate_start:function(e){var a=c('.abb_plugin_deactivate[data-slug="'+e+'"]'),n={action:"abb_remove_plugin",abb_controlpanel_plugin_name:a.data("name"),abb_controlpanel_plugin_slug:e};jupiterx_modal({title:jupiterx_cp_textdomain.deactivating_plugin,text:jupiterx_cp_textdomain.wait_for_plugin_deactivation,type:"",showCancelButton:!1,showConfirmButton:!1,showCloseButton:!1,showLearnmoreButton:!1,progress:"100%",showProgress:!0,indefiniteProgress:!0}),c.ajax({type:"POST",url:ajaxurl,data:n,dataType:"json",timeout:6e4,success:function(t){if(console.log("Deactivate Process : ",n,"Response : ",t),t.hasOwnProperty("status")){if(1==t.status)return a.closest(".jupiterx-cp-plugin-item").prependTo("#js__jupiterx-new-plugins"),a.closest(".jupiterx-plugin-update-tag").remove(),a.removeClass("btn-outline-danger").addClass("btn-primary"),c('.abb_plugin_update[data-slug="'+e+'"]').remove(),a.html(jupiterx_cp_textdomain.activate),a.addClass("abb_plugin_activate").removeClass("abb_plugin_deactivate"),s.toggle_new_plugin_title(),jupiterx_modal({title:jupiterx_cp_textdomain.deactivating_notice,text:s.language(jupiterx_cp_textdomain.plugin_deactivate_successfully,[]),type:"success",showCancelButton:!1,showConfirmButton:!0,showCloseButton:!1,showLearnmoreButton:!1,showProgress:!1,indefiniteProgress:!1}),!0;jupiterx_modal({title:jupiterx_cp_textdomain.oops,text:t.message,type:"error",showCancelButton:!1,showConfirmButton:!0,showLearnmoreButton:!1})}else jupiterx_modal({title:jupiterx_cp_textdomain.oops,text:jupiterx_cp_textdomain.something_wierd_happened_please_retry_again,type:"error",showCancelButton:!1,showConfirmButton:!0,showLearnmoreButton:!1})},error:function(t,e,a){s.request_error_handling(t,e,a)}})},update_plugin:function(t){t.preventDefault();var e=c(this),a=e.data("name");jupiterx_modal({title:jupiterx_cp_textdomain.update_plugin,text:jupiterx_cp_textdomain.you_are_about_to_update+" "+a,type:"warning",showCancelButton:!0,showConfirmButton:!0,confirmButtonText:jupiterx_cp_textdomain.conitune,showCloseButton:!1,showLearnmoreButton:!1,showProgress:!1,onConfirm:function(){s.update_start(e)}})},update_start:function(n){var t=n.data("slug"),o=(n=c('.abb_plugin_update[data-slug="'+t+'"]')).data("name");jupiterx_modal({title:jupiterx_cp_textdomain.updating_plugin,text:jupiterx_cp_textdomain.wait_for_plugin_update,type:"",showCancelButton:!1,showConfirmButton:!1,showCloseButton:!1,showLearnmoreButton:!1,progress:"100%",showProgress:!0,indefiniteProgress:!0});var i={action:"abb_update_plugin",abb_controlpanel_plugin_name:o,abb_controlpanel_plugin_slug:t};c.ajax({type:"POST",url:ajaxurl,data:i,dataType:"json",timeout:6e4,success:function(t){if(console.log("Update Plugin :",i," Response :",t),t.hasOwnProperty("status")){if(1==t.status){var e=t.message,a=n.closest(".jupiterx-cp-plugin-item");return jupiterx_modal({title:jupiterx_cp_textdomain.plugin_is_successfully_updated,text:o+jupiterx_cp_textdomain.plugin_updated_recent_version,type:"success",showCancelButton:!1,showConfirmButton:!0,showCloseButton:!1,showLearnmoreButton:!1,showProgress:!1}),a.find(".jupiterx-cp-plugin-update-tag").remove(),a.find(".item-version-tag").text(e),n.remove(),!0}jupiterx_modal({title:jupiterx_cp_textdomain.something_went_wrong,text:t.message,type:"error",showCancelButton:!1,showConfirmButton:!0,showLearnmoreButton:!1})}else jupiterx_modal({title:jupiterx_cp_textdomain.oops,text:jupiterx_cp_textdomain.something_wierd_happened_please_retry_again,type:"error",showCancelButton:!1,showConfirmButton:!0,showLearnmoreButton:!1})},error:function(t,e,a){s.request_error_handling(t,e,a)}})},request_error_handling:function(t,e,a){console.log(t),4==t.readyState?jupiterx_modal({title:jupiterx_cp_textdomain.oops,text:t.status,type:"error",showCancelButton:!1,showConfirmButton:!0,showLearnmoreButton:!1}):0==t.readyState?jupiterx_modal({title:jupiterx_cp_textdomain.oops,text:jupiterx_cp_textdomain.error_in_network_please_check_your_connection_and_try_again,type:"error",showCancelButton:!1,showConfirmButton:!0,showLearnmoreButton:!1}):jupiterx_modal({title:jupiterx_cp_textdomain.oops,text:jupiterx_cp_textdomain.something_wierd_happened_please_retry_again,type:"error",showCancelButton:!1,showConfirmButton:!0,showLearnmoreButton:!1})},language:function(a,t){if(void 0!==a&&""!=a){var e=t.length;return e<1||(e==(a.match(/{param}/g)||[]).length?c.each(t,function(t,e){a=a.replace("{param}",e)}):console.log("Array len and indicator lengh is not same, Contact support with ID : (3-6H1T4I) .")),a}},toggle_new_plugin_title:function(){c.trim(c("#js__jupiterx-new-plugins").html()).length?c(".jupiterx-cp-new-plugins > h3").show():c(".jupiterx-cp-new-plugins > h3").hide()}};c(window).on("control_panel_pane_loaded",s.init);var l={template_pre_request:9,server_response_status:!1,install_types:["preparation","backup_db","backup_media_records","reset_db","upload","unzip","validate","plugin","theme_content","setup_pages","settings","menu_locations","theme_widget","restore_media_records","finalize"],template_id:null,template_name:null,import_media:!1,progress_bar_html:"",init:function(){0!=c("#jupiterx-cp-templates").length&&(l.get_installed_template(),l.get_template_list(),l.get_template_category_list(),l.template_category_dropdown(),c(window).scroll(l.throttle(l.infinite_load_templates,200)),c(document).on("click","#js__restore-template-btn",l.get_template_restore_init),c(document).on("click","#js__cp_template_uninstall",l.uninstall_template_trigger),c(document).on("change","#js__templates-category-filter",l.template_category_filter),c("#js__template-search").on("keyup",_.debounce(l.template_search,800)),c(document).on("click",".js__cp_template_install",l.template_install_init),c(document).on("click",".jupiterx-download-psd",l.download_template_psd))},download_template_psd:function(t){t.preventDefault();var e={action:"abb_get_template_psd_link",template_name:c(this).attr("data-slug")};jQuery.post(ajaxurl,e,function(t){1==t.status?top.location.href=t.data.psd_link:(console.log(t),swal("Oops...",t.message,"error"))})},get_template_list_html:function(t){var e=1<arguments.length&&void 0!==arguments[1]&&arguments[1];"jupiterx-default-template"==t.slug||t.slug;var a=t.slug,n=t.name;if(0==e)var o='<a class="btn btn-primary mr-2 jupiterx-cp-template-item-btn js__cp_template_install" href="#" data-title="'+n.replace(" Jupiterx","")+'" data-name="'+t.name+'" data-slug="'+t.slug+'" data-id="'+t.id+'">'+jupiterx_cp_textdomain.import+'</a><a class="btn btn-outline-secondary mr-2 jupiterx-cp-template-item-btn" href="http://demos.artbees.net/jupiterx/'+a.replace("-jupiterx","")+'" target="_blank">'+jupiterx_cp_textdomain.preview+"</a>";else o='<a id="js__cp_template_uninstall" class="btn btn-outline-danger mr-2 jupiterx-cp-template-item-btn" href="#" data-title="'+n.replace(" Jupiterx","")+'" data-name="'+t.name+'" data-slug="'+t.slug+'" data-id="'+t.id+'">'+jupiterx_cp_textdomain.remove+'</a><a class="btn btn-outline-secondary mr-2 jupiterx-cp-template-item-btn" href="http://demos.artbees.net/jupiterx/'+a.replace("-jupiterx","")+'" target="_blank">'+jupiterx_cp_textdomain.preview+"</a>";return t.psd_file&&(o+='<a class="btn btn-outline-primary jupiterx-download-psd" data-name="'+t.name+'" href="#" data-slug="'+t.slug.replace("-jupiterx","")+'" data-id="'+t.id+'" title="'+jupiterx_cp_textdomain.download_psd_files+'">.PSD</a>'),'<div class="jupiterx-cp-template-item"><div class="jupiterx-cp-template-item-inner jupiterx-card"><figure class="jupiterx-cp-template-item-fig"><img src="'+t.img_url+'" alt="'+t.name+'"></figure><div class="jupiterx-cp-template-item-meta jupiterx-card-body"><h4 class="jupiterx-cp-template-item-name">'+n.replace(" Jupiterx","")+'</h4><div class="jupiterx-cp-template-item-buttons'+(t.psd_file?" has-psd":"")+'">'+o+"</div></div></div></div>"},get_template_list:function(){var o=Number(c(".abb-template-page-load-more").data("from"));l.server_response_status=!0;var t={action:"abb_template_lazy_load",from:o,count:l.template_pre_request};void 0!==l.template_id&&null!==l.template_id&&(t.template_category=l.template_id),void 0!==l.template_name&&null!==l.template_name&&(t.template_name=l.template_name),c(".abb-template-page-load-more").addClass("is-active"),c.post(ajaxurl,t,function(t){if(1==t.status){var e=t.data.backups,a=[],n="";e.hasOwnProperty("list_of_backups")&&(null==(a=e.list_of_backups)?console.log("List Of Backups is NULL!"):0==a.length?console.log("List Of Backups is EMPTY!"):(n=e.latest_backup_file.created_date,c("#js__restore-template-wrap").addClass("is-active"),c("#js__restore-template-btn").attr("data-content",jupiterx_cp_textdomain.template_backup_date+n))),0<t.data.templates.length&&(c(".abb-template-page-load-more").data("from",o+t.data.templates.length),c.each(t.data.templates,function(t,e){c("#js__installed-template").data("installed-template")!==e.slug&&c("#js__new-templates-list").append(l.get_template_list_html(e))}),l.server_response_status=!1),c(".abb-template-page-load-more").removeClass("is-active")}else console.log(t),jupiterx_modal({title:jupiterx_cp_textdomain.oops,text:t.message,type:"error",showCancelButton:!1,showConfirmButton:!0,showLearnmoreButton:!1})})},get_template_category_list:function(){var n='<span class="dropdown-item" data-value="no-category">No category found</span>',o=c(".js__template-category-list-wrap");c.ajax({type:"POST",url:ajaxurl,data:{action:"abb_get_templates_categories"},dataType:"json",timeout:6e4,success:function(t){if(!0===t.hasOwnProperty("status"))if(!0===t.status){var a='<span class="dropdown-item" data-value="all-categories">All Categories</span>';c.each(t.data,function(t,e){a+='<span class="dropdown-item" data-value="'+e.id+'">'+e.name+"</span>"}),o.html(a)}else o.html(n);else o.html(n)},error:function(t,e,a){o.html(n),l.request_error_handling(t,e,a)}})},template_category_dropdown:function(){c(document).on("click",".js__template-category-list-wrap span",function(t){var e=c(this);c("#js__templates-category-filter").val(e.attr("data-value")).trigger("change"),c("#js__templates-category-filter").siblings("button").text(e.text())})},reset_template_list:function(){c("#js__new-templates-list").fadeOut(200,function(){c(this).empty().fadeIn(200)}),c(".abb-template-page-load-more").data("from",0)},template_category_filter:function(){l.reset_template_list(),l.template_id=c(this).val(),l.get_template_list()},template_search:function(t){l.reset_template_list(),l.template_name=c(this).val(),l.get_template_list()},get_installed_template:function(){var t=0<arguments.length&&void 0!==arguments[1]&&arguments[1],e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],a=c("#js__installed-template").data("installed-template-id");t&&(a=t);var n=c("#js__installed-template").data("installed-template");if(e&&(n=e),!(a.length<=0&&n.length<=0)){var o={action:"abb_template_lazy_load",from:0,count:1,template_id:a,template_name:n};c.post(ajaxurl,o,function(t){1==t.status&&0<t.data.templates.length&&c.each(t.data.templates,function(t,e){c("#js__installed-template-wrap").show(),c("#js__installed-template").attr("data-installed-template-id",e.id).attr("data-installed-template",e.slug).empty().append(l.get_template_list_html(e,!0))})})}},template_install_init:function(t){t.preventDefault();var e=c(this),a=c("#request-filesystem-credentials-dialog");a.length?l.get_fs_credential_data()?l.get_template_install_modal(e):l.get_fs_credential_modal(a,e,"install"):l.get_template_install_modal(e)},get_template_install_modal:function(t){jupiterx_modal({title:jupiterx_cp_textdomain.important_notice,text:jupiterx_cp_textdomain.installing_sample_data_will_delete_all_data_on_this_website+"<br> You are about to install <strong>"+t.data("title")+"</strong>",type:"warning",showCancelButton:!0,showConfirmButton:!0,confirmButtonText:jupiterx_cp_textdomain.yes_install,showCloseButton:!0,showLearnmoreButton:!1,onConfirm:function(){jupiterx_modal({title:jupiterx_cp_textdomain.include_images_and_videos,text:l.language(jupiterx_cp_textdomain.would_you_like_to_import_images_and_videos_as_preview,['<a href="https://intercom.help/artbees/jupiterx/getting-started/installing-a-template" target="_blank">Learn More</a>']),type:"warning",showCancelButton:!0,showConfirmButton:!0,confirmButtonText:jupiterx_cp_textdomain.do_not_include,cancelButtonText:jupiterx_cp_textdomain.include,showCloseButton:!0,showLearnmoreButton:!1,onConfirm:function(){l.import_media=!1,l.start_importing_template(t)},onCancel:function(){l.import_media=!0,l.start_importing_template(t)}})}})},start_importing_template:function(t){var e="";e+='<div class="jupiterx-modal-header">',e+='<h3 class="jupiterx-modal-title">'+jupiterx_cp_textdomain.install_sample_data+"</h3>",e+="</div>",e+='<div class="jupiterx-modal-desc">',e+='<ul class="jupiterx-modal-step-list">',e+='<li id="js__cp-template-install-steps-backup">'+jupiterx_cp_textdomain.backup_reset_database+' <span class="result-message"></span></li>',e+='<li id="js__cp-template-install-steps-upload">'+jupiterx_cp_textdomain.downloading_sample_package_data+' <span class="result-message"></span></li>',e+='<li id="js__cp-template-install-steps-plugin">'+jupiterx_cp_textdomain.install_required_plugins+' <span class="result-message"></span></li>',e+='<li id="js__cp-template-install-steps-install">'+jupiterx_cp_textdomain.install_sample_data+' <span class="result-message"></span></li>',e+="</ul>",e+="</div>",l.progress_bar_html=c(e),jupiterx_modal({html:l.progress_bar_html,showProgress:!0,progress:"0%",showCloseButton:!1,showConfirmButton:!1,closeOnOutsideClick:!1}),l.install_template(0,t.data("name"),t.data("id"))},finalise_template_install:function(t,e,a){l.get_installed_template(e,a),c('a[data-slug="'+e+'"]').parents(".jupiterx-cp-template-item").hide(),jupiterx_modal({title:jupiterx_cp_textdomain.hooray,text:jupiterx_cp_textdomain.template_installed_successfully,type:"success",showCancelButton:!1,showConfirmButton:!0,showCloseButton:!1,showLearnmoreButton:!1}),r=!1,l.create_restore_button()},install_template:function(n,o,i){if(null==l.install_types[n])return l.finalise_template_install(n,o,i),!1;var t=l.get_fs_credential_data(),e={action:"abb_install_template_procedure",type:l.install_types[n],template_name:o,template_id:i,import_media:l.import_media};if(t&&(e=c.extend({},t,e)),r=1,"theme_content"==e.type&&window.EventSource&&!navigator.userAgent.match(/Edge|MSIE|Trident/)){console.log("EventSource is triggered. The event log will be streamed below in separated interval.");var a=ajaxurl+"?action=abb_install_template_sse&template_name="+o+"&fetch_attachments="+l.import_media+"&template_id="+i,s=new EventSource(a);s.onmessage=function(t){var e=JSON.parse(t.data),a="";return e.hasOwnProperty("message")&&(a=e.message),e.hasOwnProperty("error")&&e.hasOwnProperty("status")&&!e.error&&e.status?(console.log("Install Template - ",l.install_types[n]," - Fetch media : ",l.import_media," : Req data - ",o," , Response - ",e),jupiterx_modal.update({progress:Math.round(100*n/(l.install_types.length-1))+"%"}),l.show_install_template_messages(l.install_types[n],a),l.install_template(++n,o,i)):function(t){jupiterx_cp_textdomain.something_wierd_happened_please_try_again;jupiterx_modal({title:jupiterx_cp_textdomain.oops,text:t,type:"error",showCancelButton:!1,showConfirmButton:!0,showLearnmoreButton:!1}),r=!1}(a),s.close(),!0},s.onerror=function(t){console.log("EventSource take a long time, try to separate the log.")},s.addEventListener("log",function(t){console.log(t.data)})}else c.ajax({type:"POST",url:ajaxurl,data:e,dataType:"json",success:function(t){console.log("Install Template - ",l.install_types[n]," - Fetch media : ",l.import_media," : Req data - ",o," , Response - ",t),t.hasOwnProperty("status")?1==t.status?(jupiterx_modal.update({progress:Math.round(100*n/(l.install_types.length-1))+"%"}),l.show_install_template_messages(l.install_types[n],t.message),l.install_template(++n,o,i)):(console.log(e.type),jupiterx_modal({title:jupiterx_cp_textdomain.oops,text:t.message,type:"error",showCancelButton:!1,showConfirmButton:!0,showLearnmoreButton:!1}),r=!1):(jupiterx_modal({title:jupiterx_cp_textdomain.oops,text:jupiterx_cp_textdomain.something_wierd_happened_please_try_again,type:"error",showCancelButton:!1,showConfirmButton:!0,showLearnmoreButton:!1}),r=!1)},error:function(t,e,a){l.request_error_handling(t,e,a),r=!1}})},uninstall_template_trigger:function(t){t.preventDefault();var e=c(this);jupiterx_modal({title:jupiterx_cp_textdomain.important_notice,text:jupiterx_cp_textdomain.uninstalling_template_will_remove_all_your_contents_and_settings,type:"warning",showCancelButton:!0,showConfirmButton:!0,confirmButtonText:jupiterx_cp_textdomain.yes_uninstall+e.data("title"),showCloseButton:!1,showLearnmoreButton:!1,onConfirm:function(){l.uninstall_template(e.data("name"))}})},uninstall_template:function(t){jupiterx_modal({title:jupiterx_cp_textdomain.uninstalling_Template,text:jupiterx_cp_textdomain.please_wait_for_few_moments,type:"",showCancelButton:!1,showConfirmButton:!1,showCloseButton:!1,showLearnmoreButton:!1,showProgress:!0,indefiniteProgress:!0}),r=1,c.post(ajaxurl,{action:"abb_uninstall_template"}).done(function(t){console.log("Ajax Req : ",t),c("#js__installed-template-wrap").hide(),l.reset_template_list(),l.get_template_list(),jupiterx_modal({title:jupiterx_cp_textdomain.hooray,text:jupiterx_cp_textdomain.template_uninstalled,type:"success",showCancelButton:!1,showConfirmButton:!0,showCloseButton:!1,showLearnmoreButton:!1}),r=!1}).fail(function(t){console.log("Failed msg : ",t),r=!1})},get_template_restore_init:function(){var t=c(this),e=c("#request-filesystem-credentials-dialog");e.length?l.get_fs_credential_data()?l.get_template_restore_modal(t):l.get_fs_credential_modal(e,t,"restore"):l.get_template_restore_modal(t)},get_template_restore_modal:function(t){c.ajax({type:"POST",url:ajaxurl,data:{action:"abb_is_restore_db"},dataType:"json",success:function(t){var e=t.data.latest_backup_file.created_date;jupiterx_modal({title:jupiterx_cp_textdomain.restore_settings,text:"<p>"+jupiterx_cp_textdomain.you_are_trying_to_restore_your_theme_settings_to_this_date+"<strong class='jupiterx-tooltip-restore--created-date'>"+e+"</strong>. "+jupiterx_cp_textdomain.are_you_sure+"</p>",type:"warning",showCancelButton:!0,showConfirmButton:!0,confirmButtonText:jupiterx_cp_textdomain.restore,showCloseButton:!1,showLearnmoreButton:!1,onConfirm:function(){jupiterx_modal({title:jupiterx_cp_textdomain.restoring_database,text:jupiterx_cp_textdomain.please_wait_for_few_moments,type:"",showCancelButton:!1,showConfirmButton:!1,showCloseButton:!1,showLearnmoreButton:!1,progress:"100%",showProgress:!0,indefiniteProgress:!0});var t={action:"abb_restore_latest_db"},e=l.get_fs_credential_data();e&&(t=c.extend({},e,t)),c.ajax({type:"POST",url:ajaxurl,data:t,dataType:"json",success:function(t){t.status?jupiterx_modal({title:t.message,type:"success",showCancelButton:!1,showConfirmButton:!0,showCloseButton:!1,showLearnmoreButton:!1,showProgress:!1,indefiniteProgress:!0,confirmButtonText:jupiterx_cp_textdomain.reload_page,onConfirm:function(){location.reload()}}):jupiterx_modal({title:jupiterx_cp_textdomain.oops,text:t.message,type:"error",showCancelButton:!1,showConfirmButton:!0,showLearnmoreButton:!1})},error:function(t,e,a){console.log("Fail: ",t)}})}})},error:function(t,e,a){console.log("Fail: ",t)}})},create_restore_button:function(){var t={action:"abb_is_restore_db"},e=l.get_fs_credential_data();e&&(t=c.extend({},e,t)),c.ajax({type:"POST",url:ajaxurl,data:t,dataType:"json",success:function(t){var e=t.data,a=[],n="";e.hasOwnProperty("list_of_backups")?null==(a=e.list_of_backups)?console.log("List Of Backups is NULL!"):0==a.length?console.log("List Of Backups is EMPTY!"):(n=e.latest_backup_file.created_date,c("#js__backup-date").text(n),c("#js__restore-template-wrap").addClass("is-active"),console.log("Restore Buttons Created Successfully!")):console.log("No backup files found!")},error:function(t,e,a){console.log("Fail: ",t)}})},show_install_template_messages:function(t,e){var a=c("#js__cp-template-install-steps-backup .result-message"),n=c("#js__cp-template-install-steps-upload .result-message"),o=c("#js__cp-template-install-steps-plugin .result-message"),i=c("#js__cp-template-install-steps-install .result-message");switch(t){case"backup_db":case"backup_media_records":a.text(e);break;case"reset_db":a.text(e),c("#js__cp-template-install-steps-backup").addClass("jupiterx-modal-step--done");break;case"upload":case"unzip":n.text(e);break;case"validate":n.text(e),c("#js__cp-template-install-steps-upload").addClass("jupiterx-modal-step--done");break;case"plugin":o.html(e),c("#js__cp-template-install-steps-plugin").addClass("jupiterx-modal-step--done");break;case"theme_content":case"menu_locations":case"setup_pages":case"theme_widget":case"restore_media_records":i.text(e);break;case"finalize":i.text(e),c("#js__cp-template-install-steps-install").addClass("jupiterx-modal-step--done")}},infinite_load_templates:function(){var t=c(".abb-template-page-load-more");if(t.length){var e=c(window).height();c(window).scrollTop()>t.offset().top-e&&!1===l.server_response_status&&l.get_template_list()}},throttle:function(t,e){var a,n,o,i,s,r,l=_.debounce(function(){s=i=!1},e);return function(){a=this,n=arguments;return o||(o=setTimeout(function(){o=null,s&&t.apply(a,n),l()},e)),i?s=!0:r=t.apply(a,n),l(),i=!0,r}},store_fs_credential_data:function(t){if(!t||!Array.isArray(t))return!1;for(var e=[],a=0;a<t.length;a++)t[a].name&&"action"!=t[a].name&&e.push({name:t[a].name,value:u.encode(t[a].value)});return e=JSON.stringify(e),"undefined"!=typeof Storage?(window.sessionStorage.setItem("XFTPCredentialsData",e),e):!!navigator.cookieEnabled&&(setCookie("JupiterXFTPCredentialsData",e),e)},get_fs_credential_data:function(){if("undefined"!=typeof Storage)var t=window.sessionStorage.getItem("JupiterXFTPCredentialsData");else if(navigator.cookieEnabled)t=getCookie("JupiterXFTPCredentialsData");if(void 0===t||!t)return!1;var e={};t=JSON.parse(t);for(var a=0;a<t.length;a++)t[a].name&&"action"!=t[a].name&&(e[t[a].name]=u.decode(t[a].value));return e},get_fs_credential_modal:function(t,o,i){var e="",a="jupiterx-install-template-credential",n=t.find(".request-filesystem-credentials-dialog-content").clone();n.find("#request-filesystem-credentials-title").hide(),n.find("input#password, input#username, input#hostname").addClass("jupiterx-textfield"),n.find("#upgrade").hide(),n.find(".cancel-button").hide(),n.find("form").attr("id",a).append('<input type="hidden" name="action" value="abb_check_ftp_credentials">'),e+='<div class="jupiterx-modal--warning js__ftp-creds-container">',e+='<div class="jupiterx-modal-header">',e+='<span class="jupiterx-modal-icon"></span>',e+='<h3 class="jupiterx-modal-title">'+n.find("#request-filesystem-credentials-title").text()+"</h3>",e+="</div>",e+='<div class="jupiterx-modal-desc">'+n.html()+"</div>",e+='<span class="jupiterx-modal-message-box"></span>',e+='<div class="jupiterx-modal-footer">',e+='<div class="jupiterx-wrap jupiterx-modal-ok-btn-wrap"><input type="button" id="js__ftp-creds-submit-btn" class="jupiterx-button jupiterx-button--blue jupiterx-button--small jupiterx-modal-ok-btn" value="'+n.find("#upgrade").val()+'"></div>',e+='<div class="jupiterx-wrap jupiterx-modal-cancel-btn-wrap"><input type="button" class="jupiterx-button jupiterx-button--gray jupiterx-button--small jupiterx-modal-cancel-btn" value="'+n.find(".cancel-button").text()+'"></div>',e+="</div>",e+="</div>";var s=jupiterx_modal({html:c(e),showCloseButton:!0,showConfirmButton:!0,closeOnOutsideClick:!1,closeOnConfirm:!1,onConfirm:function(){var n=c("#"+a).serializeArray();c.ajax(ajaxurl,{data:n,method:"POST",beforeSend:function(t,e){c(".request-credentials-form-modal .jupiterx-modal-message-box").hide()},success:function(t,e,a){t.status?(s.close(),l.store_fs_credential_data(n),"install"==i?l.get_template_install_modal(o):"restore"==i&&l.get_template_restore_modal(o)):t.message?c(".js__ftp-creds-container .jupiterx-modal-message-box").show().text(t.message):c(".js__ftp-creds-container .jupiterx-modal-message-box").show().text(jupiterx_cp_textdomain.incorrect_credentials)},error:function(t,e,a){}})}})},request_error_handling:function(t,e,a){console.log(t);var n="";jupiterx_modal({html:l.progress_bar_html,showProgress:!0,progress:"0%",showCloseButton:!1,closeOnOutsideClick:!1}),4==t.readyState?""!=t.responseText?(n+='<div class="jupiterx-modal--error">',n+='<div class="jupiterx-modal-header">',n+='<span class="jupiterx-modal-icon"></span>',n+='<h3 class="jupiterx-modal-title">'+jupiterx_cp_textdomain.whoops+"</h3>",n+="</div>",n+='<div class="jupiterx-modal-desc">'+l.language(jupiterx_cp_textdomain.dont_panic,[t.status,'<a href="https://intercom.help/artbees/jupiterx/getting-started/installing-a-template" target="_blank">Learn More</a>'])+"</div>",n+='<textarea readonly="readonly" onclick="this.focus();this.select()" class="jupiterx-modal-textarea">'+t.responseText+"</textarea>",n+="</div>",jupiterx_modal({html:c(n),showCloseButton:!0,showConfirmButton:!0,closeOnOutsideClick:!1})):jupiterx_modal({title:jupiterx_cp_textdomain.oops,text:l.language(jupiterx_cp_textdomain.dont_panic,[t.status,'<a href="https://intercom.help/artbees/jupiterx/getting-started/installing-a-template" target="_blank">Learn More</a>']),type:"error",showCancelButton:!1,showConfirmButton:!0,showLearnmoreButton:!1}):0==t.readyState?jupiterx_modal({title:jupiterx_cp_textdomain.oops,text:jupiterx_cp_textdomain.error_in_network_please_check_your_connection_and_try_again,type:"error",showCancelButton:!1,showConfirmButton:!0,showLearnmoreButton:!1}):jupiterx_modal({title:jupiterx_cp_textdomain.oops,text:jupiterx_cp_textdomain.something_wierd_happened_please_try_again,type:"error",showCancelButton:!1,showConfirmButton:!0,showLearnmoreButton:!1})},language:function(a,t){if(void 0!==a&&""!=a){var e=t.length;return e<1||(e==(a.match(/{param}/g)||[]).length?c.each(t,function(t,e){a=a.replace("{param}",e)}):console.log("Array len and indicator lengh is not same, Contact support with ID : (3-6H1T4I) .")),a}}};c(window).on("control_panel_pane_loaded",l.init);var a={init:function(){0!=c("#jupiterx-cp-updates-downgrades").length&&(console.log("updates.theme"),c(document).on("click",".js__cp_change_theme_version",a.change_theme_version_init),c(document).on("click",".release-download",a.release_download))},release_download:function(t){t.preventDefault(),t.stopPropagation();var e=c(this),a=e.attr("status");if(void 0===a&&(a="active"),"active"===a){var n=c(this).data("release-id"),o=c(this).data("nonce");e.attr("status","deactive"),setTimeout(function(){e.attr("status","active")},9e3),jQuery.ajax({url:ajaxurl,type:"POST",data:{security:o,release_id:n,action:"jupiterx_get_theme_release_package_url"},success:function(t){var e=jQuery.parseJSON(t);console.log(e),e.success&&(top.location.href=e.download_link)},error:function(t){console.log(t),alert("An error occurred.")}})}},change_theme_version_init:function(t){t.preventDefault();var e=c(this),a=e.data("release-id"),n=e.data("release-version"),o=e.data("nonce"),i=e.siblings(".jupiterx-cp-update-feedback");jupiterx_modal({title:jupiterx_cp_textdomain.please_note,text:jupiterx_cp_textdomain.any_customisation_you_have_made_to_theme_files_will_be_lost,type:"warning",showCancelButton:!0,showConfirmButton:!0,confirmButtonText:jupiterx_cp_textdomain.agree,cancelButtonText:jupiterx_cp_textdomain.discard.toUpperCase(),learnmoreTarget:"_blank",learnmoreLabel:"Read More",learnmoreButton:"https://intercom.help/artbees?q=Update+jupiter+x",showCloseButton:!0,showLearnmoreButton:!0,onConfirm:function(){i.removeClass("d-none"),e.addClass("disabled"),wp.ajax.send("jupiterx_modify_auto_update",{data:{security:o,release_id:a,release_version:n},success:function(t){wp.updates.ajax("update-theme",{slug:"jupiterx",success:function(t){i.removeClass("text-muted").addClass("text-success").text(_.last(t.debug)),e.removeClass("disabled"),window.location.reload()},error:function(t){i.removeClass("text-muted").addClass("text-danger").text(_.last(t.debug)),e.removeClass("disabled")}})},error:function(t){console.log(t)}})}})}};c(window).on("control_panel_pane_loaded",a.init);var d={init:function(){c(".js__cp-clist-add-item").on("click",d.add),c(".js__cp-clist-edit-item").on("click",d.edit),c(".js__cp-clist-remove-item").on("click",d.remove)},remove:function(t){t.preventDefault();var e=c(this);jupiterx_modal({title:jupiterx_cp_textdomain.remove_image_size,text:jupiterx_cp_textdomain.are_you_sure_remove_image_size,type:"warning",showCancelButton:!0,showConfirmButton:!0,showCloseButton:!1,showLearnmoreButton:!1,onConfirm:function(){e.closest(".jupiterx-img-size-item").remove(),c(window).trigger("control_panel_save_image_sizes")}})},add:function(t){var e="";e+='<div class="jupiterx-modal-header">',e+='<span class="jupiterx-modal-icon"></span>',e+='<h3 class="jupiterx-modal-title">'+jupiterx_cp_textdomain.add_image_size+"</h3>",e+="</div>",e+='<div class="jupiterx-modal-desc">',e+='<div class="form-group mb-3">',e+="<label><strong>"+jupiterx_cp_textdomain.image_size_name+"</strong></label>",e+='<input class="jupiterx-form-control" name="size_n" type="text" required />',e+="</div>",e+='<div class="form-row">',e+='<div class="form-group col-md-6">',e+="<label><strong>"+jupiterx_cp_textdomain.image_size_width+"</strong></label>",e+='<input class="jupiterx-form-control" min="100" name="size_w" step="1" type="number" required />',e+="</div>",e+='<div class="form-group col-md-6">',e+="<label><strong>"+jupiterx_cp_textdomain.image_size_height+"</strong></label>",e+='<input class="jupiterx-form-control" min="100" name="size_h" id="size_h" step="1" type="number" required />',e+="</div>",e+="</div>",e+='<div class="custom-control custom-checkbox form-group mb-3">',e+='<input type="checkbox" class="custom-control-input" id="size_c" name="size_c" checked="checked">',e+='<label class="custom-control-label" for="size_c"><strong>'+jupiterx_cp_textdomain.image_size_crop+"</strong></label>",e+="</div>",e+="</div>";var a=jupiterx_modal({modalCustomClass:"js__add-new-image-size",type:"warning",html:c(e),showCloseButton:!0,showConfirmButton:!0,showCancelButton:!0,closeOnOutsideClick:!0,closeOnConfirm:!1,confirmButtonText:jupiterx_cp_textdomain.save,cancelButtonText:jupiterx_cp_textdomain.discard,onConfirm:function(){d.apply(!1,a)}})},edit:function(t){var e=c(this),a=e.closest(".js__cp-image-size-item"),n=e.closest(".jupiterx-card-body"),o=n.find("[name=size_n]").val(),i=n.find("[name=size_w]").val(),s=n.find("[name=size_h]").val(),r=n.find("[name=size_c]").val();r="on"==r&&'checked="checked"';var l="";l+='<div class="jupiterx-modal-header">',l+='<span class="jupiterx-modal-icon"></span>',l+='<h3 class="jupiterx-modal-title">'+jupiterx_cp_textdomain.edit_image_size+"</h3>",l+="</div>",l+='<div class="jupiterx-modal-desc">',l+='<div class="form-group mb-3">',l+="<label><strong>"+jupiterx_cp_textdomain.image_size_name+"</strong></label>",l+='<input class="jupiterx-form-control" name="size_n" type="text" value="'+o+'" required />',l+="</div>",l+='<div class="form-row">',l+='<div class="form-group col-md-6">',l+="<label><strong>"+jupiterx_cp_textdomain.image_size_width+"</strong></label>",l+='<input class="jupiterx-form-control" min="100" name="size_w" step="1" type="number"  value="'+i+'" required />',l+="</div>",l+='<div class="form-group col-md-6">',l+="<label><strong>"+jupiterx_cp_textdomain.image_size_height+"</strong></label>",l+='<input class="jupiterx-form-control" min="100" name="size_h" id="size_h" step="1" type="number"  value="'+s+'" required />',l+="</div>",l+="</div>",l+='<div class="custom-control custom-checkbox form-group mb-3">',l+='<input type="checkbox" class="custom-control-input" id="size_c" name="size_c" '+r+">",l+='<label class="custom-control-label" for="size_c"><strong>'+jupiterx_cp_textdomain.image_size_crop+"</strong></label>",l+="</div>",l+="</div>";var p=jupiterx_modal({modalCustomClass:"js__add-new-image-size",type:"warning",html:c(l),showCloseButton:!0,showConfirmButton:!0,showCancelButton:!0,closeOnOutsideClick:!0,closeOnConfirm:!1,confirmButtonText:jupiterx_cp_textdomain.save,cancelButtonText:jupiterx_cp_textdomain.discard,onConfirm:function(){d.apply(a,p)}})},apply:function(t,e){var a="",n=c(".js__add-new-image-size"),o=n.find("[name=size_n]"),i=n.find("[name=size_w]"),s=n.find("[name=size_h]"),r=n.find("[name=size_n]").val(),l=n.find("[name=size_w]").val(),p=n.find("[name=size_h]").val(),u=n.find("[name=size_c]:checked").val(),_="on"==(u="on"==u?"on":"off")?"status-true":"status-false";return""==r?(o.addClass("is-invalid"),!1):(o.removeClass("is-invalid"),""==l?(i.addClass("is-invalid"),!1):(i.removeClass("is-invalid"),""==p?(s.addClass("is-invalid"),!1):(s.removeClass("is-invalid"),a+='<div class="jupiterx-img-size-item js__cp-image-size-item">',a+='<div class="jupiterx-img-size-item-inner jupiterx-card">',a+='<div class="jupiterx-card-body fetch-input-data">',a+='<div class="js__size-name mb-3"><strong>'+jupiterx_cp_textdomain.size_name+":</strong> "+r+"</div>",a+='<div class="js__size-dimension mb-3"><strong>'+jupiterx_cp_textdomain.image_size+":</strong> "+l+"px "+p+"px</div>",a+='<div class="js__size-crop mb-3"><strong>'+jupiterx_cp_textdomain.crop+':</strong><span class="status-state '+_+'"></span></div>',a+='<button type="button" class="btn btn-outline-success js__cp-clist-edit-item mr-1">'+jupiterx_cp_textdomain.edit+"</button>",a+='<button type="button" class="btn btn-outline-danger js__cp-clist-remove-item">'+jupiterx_cp_textdomain.remove+"</button>",a+='<input name="size_n" type="hidden" value="'+r+'" />',a+='<input name="size_w" type="hidden" value="'+l+'" />',a+='<input name="size_h" type="hidden" value="'+p+'" />',a+='<input name="size_c" type="hidden" value="'+u+'" />',a+="</div>",a+="</div>",0<t.length?(t.after(a),t.remove()):c(".js__jupiterx-img-size-list").append(a),d.init(),e.close(),void d.save())))},save:function(t){var e=c(".js__jupiterx-img-size-list"),a=[];e.find(".js__cp-image-size-item").each(function(){a.push(c(this).find(".fetch-input-data input").serialize())}),r=1;var n=jupiterx_modal({title:jupiterx_cp_textdomain.saving_image_size,text:jupiterx_cp_textdomain.wait_for_image_size_update,type:"",showCancelButton:!1,showConfirmButton:!1,showCloseButton:!1,showLearnmoreButton:!1,progress:"100%",showProgress:!0,indefiniteProgress:!0});jQuery.ajax({url:ajaxurl,type:"POST",data:{action:"jupiterx_save_image_sizes",options:a,security:c("#security").val()},success:function(t){n.close(),1!=t&&jupiterx_modal({title:jupiterx_cp_textdomain.oops,text:jupiterx_cp_textdomain.image_sizes_could_not_be_stored,type:"error",showCancelButton:!1,showConfirmButton:!0,showCloseButton:!1,showLearnmoreButton:!1}),r=!1},error:function(t){console.log(t),r=!1,jupiterx_modal({type:"error",title:jupiterx_cp_textdomain.error,text:t+" "+jupiterx_cp_textdomain.issue_persists,showCancelButton:!1,showConfirmButton:!0,showCloseButton:!1,showLearnmoreButton:!1,showProgress:!1,closeOnConfirm:!1,confirmButtonText:jupiterx_cp_textdomain.try_again,onConfirm:function(){window.location.reload()}})}})}};function i(){c(".jupiterx-button--get-system-report").click(function(){var i="";c("#jupiterx-cp-system-status thead, #jupiterx-cp-system-status tbody").each(function(){if(c(this).is("thead")){var t=c(this).find("th:eq(0)").data("export-label")||c(this).text();i=i+"\n### "+c.trim(t)+" ###\n\n"}else c("tr",c(this)).each(function(){var t=c(this).find("td:eq(0)").data("export-label")||c(this).find("td:eq(0)").text(),e=c.trim(t).replace(/(<([^>]+)>)/gi,""),a=c.trim(c(this).find("td:eq(2)").text()),n=a.split(", ");if(1<n.length){var o="";c.each(n,function(t,e){o=o+e+"\n"}),a=o}i=i+""+e+": "+a+"\n"})});try{return c("#jupiterx-textarea--get-system-report").slideDown(),c("#jupiterx-textarea--get-system-report textarea").val(i).focus().select(),!1}catch(t){console.log(t)}return!1})}c(window).on("control_panel_save_image_sizes",d.save),c(window).on("control_panel_pane_loaded",d.init);var u={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(t){var e,a,n,o,i,s,r,l="",p=0;for(t=u._utf8_encode(t);p<t.length;)o=(e=t.charCodeAt(p++))>>2,i=(3&e)<<4|(a=t.charCodeAt(p++))>>4,s=(15&a)<<2|(n=t.charCodeAt(p++))>>6,r=63&n,isNaN(a)?s=r=64:isNaN(n)&&(r=64),l=l+this._keyStr.charAt(o)+this._keyStr.charAt(i)+this._keyStr.charAt(s)+this._keyStr.charAt(r);return l},decode:function(t){var e,a,n,o,i,s,r="",l=0;for(t=t.replace(/[^A-Za-z0-9+/=]/g,"");l<t.length;)e=this._keyStr.indexOf(t.charAt(l++))<<2|(o=this._keyStr.indexOf(t.charAt(l++)))>>4,a=(15&o)<<4|(i=this._keyStr.indexOf(t.charAt(l++)))>>2,n=(3&i)<<6|(s=this._keyStr.indexOf(t.charAt(l++))),r+=String.fromCharCode(e),64!=i&&(r+=String.fromCharCode(a)),64!=s&&(r+=String.fromCharCode(n));return r=u._utf8_decode(r)},_utf8_encode:function(t){t=t.replace(/rn/g,"n");for(var e="",a=0;a<t.length;a++){var n=t.charCodeAt(a);n<128?e+=String.fromCharCode(n):(127<n&&n<2048?e+=String.fromCharCode(n>>6|192):(e+=String.fromCharCode(n>>12|224),e+=String.fromCharCode(n>>6&63|128)),e+=String.fromCharCode(63&n|128))}return e},_utf8_decode:function(t){for(var e="",a=0,n=0,o=0;a<t.length;)(n=t.charCodeAt(a))<128?(e+=String.fromCharCode(n),a++):191<n&&n<224?(o=t.charCodeAt(a+1),e+=String.fromCharCode((31&n)<<6|63&o),a+=2):(o=t.charCodeAt(a+1),c3=t.charCodeAt(a+2),e+=String.fromCharCode((15&n)<<12|(63&o)<<6|63&c3),a+=3);return e}},p={steps:[],modal:"",data:{},init:function(){c(".jupiterx-cp-export-form").on("submit",p.export),c(".jupiterx-cp-import-btn").on("click",p.import),c(".jupiterx-cp-import-upload-btn").on("click",p.upload)},export:function(t){t.preventDefault(),p.steps=[],p.modal="",p.cancel="";var e=c(this).serializeArray();p.data.filename=e[0].value,e=_.reject(e,function(t){return"filename"==t.name}),p._mapOptions(e)&&(p.modal=jupiterx_modal({type:!1,title:jupiterx_cp_textdomain.exporting+' <span class="cp-export-step">'+p.steps[1]+"</span>...",text:jupiterx_cp_textdomain.export_waiting,showCancelButton:!0,showConfirmButton:!1,showCloseButton:!1,showLearnmoreButton:!1,showProgress:!0,progress:"100%",indefiniteProgress:!0,cancelButtonText:jupiterx_cp_textdomain.discard,closeOnConfirm:!1,closeOnOutsideClick:!1,onCancel:function(){p.steps=[],p.cancel=!0,p.send("Export","Discard"),p.modal.close()}}),p.send("Export",_.first(p.steps)))},import:function(t){t.preventDefault(),p.steps=[],p.modal="",p.cancel="";var e=c(".jupiterx-cp-import-wrap .jupiterx-form-control").data("id");if(void 0===e)return!1;p.attachment_id=e,p.modal=jupiterx_modal({type:!1,title:"Import",text:jupiterx_cp_textdomain.import_select_options+'\t\t\t\t<form class="jupiterx-cp-import-form">\t\t\t\t\t<label>\t\t\t\t\t\t<input type="checkbox" name="check" value="Content" checked>'+jupiterx_cp_textdomain.site_content+'\t\t\t\t\t</label>\t\t\t\t\t<label>\t\t\t\t\t\t<input type="checkbox" name="check" value="Widgets" checked>'+jupiterx_cp_textdomain.widgets+'\t\t\t\t\t</label>\t\t\t\t\t<label>\t\t\t\t\t\t<input type="checkbox" name="check" value="Settings" checked>'+jupiterx_cp_textdomain.settings+"\t\t\t\t\t</label>\t\t\t\t</form>",showCancelButton:!1,showConfirmButton:!0,showCloseButton:!0,showLearnmoreButton:!1,showProgress:!1,closeOnConfirm:!1,confirmButtonText:jupiterx_cp_textdomain.import,onConfirm:function(){var t=c(".jupiterx-cp-import-form").serializeArray();p._mapOptions(t)&&(jupiterx_modal({type:!1,title:jupiterx_cp_textdomain.importing+' <span class="cp-export-step">'+p.steps[1]+"</span>...",text:jupiterx_cp_textdomain.import_waiting,showCancelButton:!0,showConfirmButton:!1,showCloseButton:!1,showLearnmoreButton:!1,progress:"100%",showProgress:!0,indefiniteProgress:!0,cancelButtonText:jupiterx_cp_textdomain.discard,closeOnOutsideClick:!1,closeOnConfirm:!1,onCancel:function(){p.steps=[],p.cancel=!0,p.send("Import","Discard"),p.modal.close()}}),p.send("Import",_.first(p.steps)))}})},send:function(n,t){wp.ajax.send("jupiterx_cp_export_import",{data:{nonce:jupiterx_control_panel.nonce,type:n,step:t,attachment_id:p.attachment_id,data:p.data},success:function(t){p.steps=_.without(p.steps,t.step);var e=_.first(p.steps);if(p.steps.length)"Start"!=t.step&&c(".cp-export-step").text(t.step),p.send(n,e);else{if(!0===p.cancel)return;var a="Export"===n?jupiterx_cp_textdomain.download:jupiterx_cp_textdomain.close;jupiterx_modal({type:"success",title:n+" "+jupiterx_cp_textdomain.done,text:n+" "+jupiterx_cp_textdomain.successfully_finished,showCancelButton:!1,showConfirmButton:!0,showCloseButton:!1,showLearnmoreButton:!1,showProgress:!1,closeOnConfirm:!1,confirmButtonText:a,onConfirm:function(){"Export"===n&&(window.location.href=t.download_url),p.modal.close()}})}},error:function(t){console.log(t),jupiterx_modal({type:"error",title:jupiterx_cp_textdomain.error,text:t+" "+jupiterx_cp_textdomain.issue_persists,showCancelButton:!1,showConfirmButton:!0,showCloseButton:!1,showLearnmoreButton:!1,showProgress:!1,closeOnConfirm:!1,confirmButtonText:jupiterx_cp_textdomain.try_again,onConfirm:function(){window.location.reload(),p.modal.close()}})}})},upload:function(t){var e;t.preventDefault();var a=c(t.target).parents(".jupiterx-upload-wrap").find("input");e||(e=wp.media({title:jupiterx_cp_textdomain.select_zip_file,button:{text:jupiterx_cp_textdomain.select},multiple:!1})).on("select",function(){var t=e.state().get("selection").first().toJSON();a.attr("data-id",t.id),a.val(t.url)}),e.open()},_mapOptions:function(t){return _.map(t,function(t){return p.steps.push(t.value)}),!!p.steps.length&&(p.steps.unshift("Start"),p.steps.push("End"),!0)}};c(window).on("control_panel_pane_loaded",p.init);var m={init:function(){c(".jupiterx-cp-settings-flush").on("click",m.flush),c(".jupiterx-cp-settings-form").on("submit",m.save)},flush:function(t){m.send("flush")},save:function(t){t.preventDefault();var e={};c.map(c(this).serializeArray(),function(t){e[t.name]=t.value}),m.send("save",e)},send:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,a=c(document).find(".jupiterx-cp-settings-"+t+"-feedback"),n=a.text();a.removeClass("d-none"),wp.ajax.send("jupiterx_cp_settings",{data:{nonce:jupiterx_control_panel.nonce,type:t,fields:e},success:function(t){a.removeClass("text-muted").addClass("text-success").text(t),setTimeout(function(){a.addClass("d-none text-muted").text(n)},3e3)},error:function(t){a.removeClass("text-muted").addClass("text-danger").text(t),setTimeout(function(){a.addClass("d-none text-muted").text(n)},3e3)}})}};c(window).on("control_panel_pane_loaded",m.init)}(jQuery);