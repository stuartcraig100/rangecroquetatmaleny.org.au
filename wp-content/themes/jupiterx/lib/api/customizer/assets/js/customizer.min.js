"use strict";!function(c,s){var p=s.customize,o=p.JupiterX||{};p.JupiterX=o;var l={stack:[],printedStack:[],addToStack:function(t){(t.type||t.name)&&(this.isFontExists(t.name)||this.stack.push(t))},removeFromStack:function(e){this.clearFontSettings(e),this.stack=_.filter(this.stack,function(t){return t.name!==e})},isFontExists:function(t){return void 0!==_.findWhere(this.stack,{name:t})},addToPrinted:function(t){this.isPrinted(t)||this.printedStack.push(t)},isPrinted:function(t){return _.contains(this.printedStack,t)},getFontValue:function(e){var n="";return _.each(this.stack,function(t){if(t.name===e)return n=t.value?t.value:e}),n},clearFontSettings:function(t){var i=this.getFontValue(t);_.each(s.customize.settings.controls,function(t){if("jupiterx-typography"===t.type){var e=s.customize(t.id).get(),n=_.extend({},s.customize(t.id).get());t.responsive&&n&&_.each(["desktop","tablet","mobile"],function(t){if(_.isObject(n[t])&&n[t].font_family===i){var e=_.extend({},n[t],{font_family:""});n[t]=e}}),!t.responsive&&n&&_.isObject(n)&&n.font_family===i&&(n.font_family=""),_.isEqual(e,n)||s.customize(t.id).set(n)}})}};o.fonts=l,o.PopupSection=p.Section.extend({initialize:function(t,e){this.containerParent="#customize-jupiterx-popup-controls",this.containerPaneParent=".customize-pane-parent",this.tabs={},this.tabsButton=null,this.tabsPane=null,this.activeTab=null,this.popups={},this.popupsContainer=null,this.popupsPane=null,p.Section.prototype.initialize.apply(this,arguments)},onChangeExpanded:function(t,e){var n=this,i=n.container,o=c(document.body);p.section.each(function(t){"kirki-popup"===t.params.type&&t.id!==n.id&&t.container.hasClass("open")&&(t.expanded.set(!1),t.container.removeClass("open"))}),o.toggleClass("open-jupiterx-popup-content",t),i.toggleClass("open",t),i.removeClass("busy"),t&&this.params.preview&&this.redirectSectionPreview(this.params.id)},redirectSectionPreview:function(t){var e=new URL(p.previewer.previewUrl.get());e.searchParams.set("jupiterx",t),p.previewer.previewUrl.set(e.toString())},attachEvents:function(){var e,t=this,n=t.params;e=function(){return t.expanded()?t.collapse():t.expand()},t.container.find(".accordion-section-title, .jupiterx-popup-close").on("click keydown",function(t){p.utils.isKeydownButNotEnterEvent(t)||(t.preventDefault(),e())}),_.isEmpty(n.tabs)||t.tabsEvents(),_.isEmpty(n.popups)||t.childPopupEvents()},tabsEvents:function(){var n=this,i=Object.keys(n.params.tabs);n.tabsPane=n.container.find(".jupiterx-tabs-pane"),n.tabsButton=n.container.find(".jupiterx-tabs-button").each(function(e,t){c(t).on("click",function(t){t.preventDefault(),n.openTab(i[e])})}),n.expanded.bind(function(){n.expanded()&&!n.activeTab&&n.openTab(i[0])}),_.each(i,function(t,e){n.tabs[t]={button:n.tabsButton[e],pane:n.tabsPane[e]}})},openTab:function(t){if(!_.isUndefined(this.tabs[t])){var e=c(this.tabs[t].button),n=c(this.tabs[t].pane);this.expanded()||this.expand(),this.activeTab=t,this.hideTabs(),e.addClass("active"),n.removeClass("hidden"),n.trigger("expanded")}},hideTabs:function(){var t=this.tabsButton.filter(".active"),e=this.tabsPane.filter(":not(.hidden)");t.removeClass("active"),e.addClass("hidden")},childPopupEvents:function(){var n=this,t=Object.keys(n.params.popups);n.popupsContainer=n.container.find(".jupiterx-popup-child"),n.popupsContainer.find(".jupiterx-child-popup-close").on("click",function(t){t.preventDefault(),n.hideChildPopups()}),n.popupsPane=n.container.find(".jupiterx-child-popup"),_.each(t,function(t,e){n.popups[t]={pane:n.popupsPane[e]}})},openChildPopup:function(t){if(!_.isUndefined(this.popups[t])){var e=c(this.popups[t].pane);this.expanded()||this.expand(),this.hideChildPopups(),this.popupsContainer.toggleClass("open",!0),e.addClass("active"),e.trigger("expanded")}},hideChildPopups:function(){this.popupsContainer.removeClass("open"),this.popupsPane.filter(".active").removeClass("active")},isContextuallyActive:function(){var e=this,t=e.controls(),n=0;return p.section.each(function(t){t.params.popup&&t.params.popup===e.id&&t.active()&&t.isContextuallyActive()&&(n+=1)}),t.forEach(function(t){t.active()&&(n+=1)}),0!==n},getContent:function(){var t=this.container,e=t.find(".jupiterx-popup-section:first"),n="sub-"+t.attr("id"),i=n,o=t.attr("aria-owns");return o&&(i=i+" "+o),t.attr("aria-owns",i),e.detach().attr({id:n,class:e.attr("class")+" "+t.attr("class")}).removeClass("accordion-section"),e}}),o.PaneSection=p.Section.extend({default:{popup:"",pane:[]},initialize:function(t,e){var n=e.params,i=n.popup,o=n.pane;i&&!_.isEmpty(o)&&(this.containerParent="#"+o.type+"-"+o.id+"-"+i,p.Section.prototype.initialize.apply(this,arguments))},embed:function(){var e=this,t=e.params.popup,n=e.params.pane;(function(t){p.section(t,function(t){"kirki-popup"===t.params.type&&t.deferred.embedded.done(function(){e.containerParent=p.ensure(e.containerParent),("popup"===n.type?e.containerParent.find(".jupiterx-child-popup-content"):e.containerParent).append(e.contentContainer),e.deferred.embedded.resolve()})})})(t)},onChangeExpanded:function(){},attachEvents:function(){var t=this;t.containerParent.on("expanded",function(){t.expanded()||t.expand()})},getContent:function(){return this.container.find(".jupiterx-controls").detach()}});var u={"jupiterx-color":{ready:function(){var t=this.container.find(".jupiterx-color-control");_.each(t,function(t){var e,n,i=c(t),o=i.find(".jupiterx-color-control-field");e=function(t){return t.getAlpha()<1?t.toRgbString():t.toHexString()},n=function(t){o.val(_.isNull(t)?"":e(t)).trigger("change")},i.find(".jupiterx-color-control-field").spectrum({containerClassName:"jupiterx-spectrum-container",replacerClassName:"jupiterx-spectrum-replacer",preferredFormat:"hex6",showButtons:!1,showInitial:!0,showInput:!0,showAlpha:!0,allowEmpty:!0,change:n,move:n})})}},"jupiterx-image":{ready:function(){var t=this.container.find(".jupiterx-image-upload-control");_.each(t,function(t){var e=c(t),n=e.find("input[type=hidden]"),i=e.find(".jupiterx-image-upload-control-preview"),o=e.find(".jupiterx-image-upload-control-remove"),r=void 0;e.on("click",function(){r||(r=s.media({title:"Insert Media",multiple:!1})).on("select",function(){var t=r.state().get("selection").first().toJSON();e.addClass("has-image"),i.prop("src",t.url),n.val(t.url),n.trigger("change")}),r.open()}),o.on("click",function(t){t.stopPropagation(),e.removeClass("has-image"),i.prop("src",""),n.val(""),n.trigger("change")})})}},"jupiterx-multicheck":{ready:function(){var t=this.container.find(".jupiterx-multicheck-control");_.each(t,function(t){var e=c(t),i=e.find("input[type=checkbox]"),o=e.find("input[type=hidden]");e.find("input[type=checkbox]").on("change",function(){var n=[];i.filter(":checked").each(function(t,e){n[t]=c(e).val()}),o.val(n).trigger("change")})})},filterData:function(t){return _.isString(t)?t.split(","):t}},"jupiterx-choose":{ready:function(){if(this.params.multiple){var t=this.container.find(".jupiterx-choose-control");_.each(t,function(t){var e=c(t),i=e.find("input[type=checkbox]"),o=e.find("input[type=hidden]");e.find("input[type=checkbox]").on("change",function(){var n=[];i.filter(":checked").each(function(t,e){n[t]=c(e).val()}),o.val(n).trigger("change")})})}},filterData:function(t){return this.params.multiple&&_.isString(t)?t.split(","):t}},"jupiterx-input":{ready:function(){var t=this.container.find(".jupiterx-input-control");_.each(t,function(t){var e=c(t),n=e.find("input.jupiterx-input-control-input"),i=e.find("input[type=hidden]");n.on("keyup blur change",function(){i.trigger("change")})})}},"jupiterx-font":{ready:function(){var t=this.container.find(".jupiterx-font-control");_.each(t,function(t){c(t).find(".jupiterx-select-field").select2({minimumResultsForSearch:-1,placeholder:"Default",allowClear:!0,containerCssClass:"jupiterx-select2-container",dropdownCssClass:"jupiterx-select2-dropdown jupiterx-select2-dropdown-wrapped",dropdownAutoWidth:!0})})}}};o.components=u;var t=function(t){if(!_.isUndefined(u[t]))return u[t]},e={"jupiterx-child-popup":{ready:function(){var e=this,n=e.params,t=void 0,i=void 0;_.isEmpty(n.bindItems)||(i=function(t){if(_.isArray(t)){var r=t;e.container.find(".jupiterx-child-popup-control-item").each(function(t,e){var n=c(e),i=n.data("value"),o=!_.contains(r,i);n.toggleClass("hidden",o)})}},t=s.customize(n.bindItems).get(),s.customize(n.bindItems).bind(i),i(t)),n.sortable&&e.container.find(".jupiterx-child-popup-control-items").sortable({stop:function(){var n=[];e.container.find(".jupiterx-child-popup-control-item").each(function(t,e){n.push(c(e).data("value"))}),e.setting.set(n)}}),_.isEmpty(n.target)||e.container.find(".jupiterx-button").on("click",function(t){t.preventDefault();var e=c(this).data("id");s.customize.section(n.target,function(t){t.openChildPopup(e)})})}},"jupiterx-popup":{ready:function(){var e=this.params;this.container.find(".jupiterx-popup-control-button").on("click",function(t){t.preventDefault(),s.customize.section(e.target,function(t){t.expand()})})}},"jupiterx-fonts":{initialize:function(t,e){var n,i=this;o.Control.prototype.initialize.call(i,t,e),n=i.setting.get(),_.each(n,function(t){i.loadWebFont(t,null,i),l.addToStack(t)})},ready:function(){var t;this.renderFontSelector(),t=this.setting.get(),_.each(t,this.renderFontPreview.bind(this))},renderFontPreview:function(t){var e=void 0,n=void 0;e=this.container.find(".jupiterx-fonts-control"),n=s.template("customize-jupiterx-fonts-control-preview"),e.append(n(t))},renderFontSelector:function(){var t=void 0,e=void 0;t=this.container.find(".jupiterx-fonts-control"),e=s.template("customize-jupiterx-fonts-control-selector"),t.prepend(e(this.params))},loadWebFont:function(t,e,n){var i={},o=void 0;if(t.type||t.name)if(l.isPrinted(t.name))_.isFunction(e)&&e();else{if("100,200,300,400,500,600,700,800,900,100italic,200italic,300italic,400italic,500italic,600italic,700italic,800italic,900italic","google"===t.type&&(i.google={families:[t.name+":100,200,300,400,500,600,700,800,900,100italic,200italic,300italic,400italic,500italic,600italic,700italic,800italic,900italic"]}),"adobe"===t.type&&n){var r=n.params.apiSource.adobe;r&&(i.typekit={id:r})}(o=c("#customize-preview iframe")).attr("name")&&WebFont.load(_.extend(_.clone(i),{context:frames[o.attr("name")]})),e&&(i.active=e,i.inactive=e,i.fontactive=e,i.fontinactive=e),WebFont.load(i),l.addToPrinted(t.name)}},actuallyReady:function(){this.previewEvents(),this.fontSelectorEvents()},previewEvents:function(){var r=this,t=r.container,e={};r.previewElements={$register:t.find(".jupiterx-fonts-control-register")},e=r.previewElements,t.on("click",".jupiterx-fonts-control-preview-remove",function(t){if(t.preventDefault(),confirm("Are you sure you want to remove this font?")){var e,n,i,o=c(t.currentTarget).parent(".jupiterx-fonts-control-preview");e=o.data("fontFamily"),i=_.clone(r.setting.get()),n=_.filter(i,function(t){return t.name!==e}),r.setting.set(n),l.removeFromStack(e),o.remove()}}),e.$register.on("click",function(t){t.preventDefault(),r.selectorElements.$wrapper.addClass("open"),r.selectorElements.$fontFamilies.val(null).trigger("change"),r.selectorElements.$textSample.removeProp("style")})},fontSelectorEvents:function(){var r,a=this,t=a.container,u={};a.selectorElements={$wrapper:t.find(".jupiterx-fonts-control-popup"),$textSample:t.find(".jupiterx-fonts-control-selector-sample"),$fontFamiliesWrapper:t.find(".jupiterx-fonts-control-selector-families"),$fontFamilies:t.find(".jupiterx-fonts-control-selector-families select"),$filtersWrapper:t.find(".jupiterx-fonts-control-selector-filters"),$filters:t.find(".jupiterx-fonts-control-selector-filters select")},u=a.selectorElements,r=function(){u.$wrapper.removeClass("open"),u.$fontFamilies.val(null).trigger("change"),u.$textSample.removeProp("style")},c.fn.select2.amd.require(["select2/selection/multiple","select2/selection/search","select2/selection/eventRelay","select2/dropdown","select2/dropdown/attachBody","select2/dropdown/closeOnSelect","select2/compat/dropdownCss","select2/compat/containerCss","select2/utils"],function(t,e,n,i,o,r,a,s,c){var p=void 0,l=void 0;p=c.Decorate(t,e),p=c.Decorate(p,n),l=c.Decorate(i,a),l=c.Decorate(l,r),l=c.Decorate(l,o),u.$fontFamilies.select2({maximumResultsForSearch:5,containerCssClass:"jupiterx-select2-container jupiterx-select2-autocomplete",selectionAdapter:c.Decorate(p,s),dropdownCssClass:"jupiterx-select2-dropdown jupiterx-select2-autocomplete",dropdownParent:u.$fontFamiliesWrapper.find(".jupiterx-select-control"),dropdownAdapter:l,width:"100%"})}),u.$fontFamilies.on("select2:select",function(t){var e,n=t.params.data,i={name:n.text,type:n.element.dataset.type,value:n.element.value};u.$textSample.css("opacity","0.65"),e=function(){u.$textSample.css({opacity:1,fontFamily:i.value})},"system"!==i.type?a.loadWebFont(i,e,a):e()}),u.$filters.on("change",function(t){var r=c(t.target).find(":selected").val();u.$fontFamilies.html(null),_.each(a.params.fontFamilies,function(t,e){var n=t.type||t,i=t.value||e;if(n===r||""===r){var o=c("<option></option>",{"data-type":n,html:e,value:i});u.$fontFamilies.append(o)}}),u.$fontFamilies.val(null).trigger("change")}),u.$wrapper.on("click",".jupiterx-fonts-control-selector-submit",function(t){t.preventDefault();var e,n,i,o=void 0;e=u.$fontFamilies.select2("data"),!_.isEmpty(e)&&e[0].text&&(n={name:e[0].text,type:e[0].element.dataset.type,value:e[0].element.value},o=_.clone(a.setting.get()),i=_.filter(o,function(t){return t.name===n.name}),_.isEmpty(i)&&(o.push(n),a.renderFontPreview(n),a.setting.set(o),l.addToStack(n))),r()}),u.$wrapper.on("click",".jupiterx-fonts-control-selector-cancel",function(t){t.preventDefault(),r()}),r()}}},n=function(t){if(!_.isUndefined(e[t]))return e[t]};o.Control=p.Control.extend({defaultActiveArguments:{duration:0,completeCallback:c.noop},initialize:function(t,e){var n=this;p.Control.prototype.initialize.call(n,t,e),n.deferred.embedded.done(function(){n.responsiveEvents(),n.previewRedirectionEvents(),n.unitsEvents(),n.unitInputValidate(),n.stepizeInputs(),n.actuallyReady()})},embed:function(){var e=this,t=e.section();t&&s.customize.section(t,function(t){t.expanded.bind(function(t){t&&e.actuallyEmbed()})})},actuallyEmbed:function(){"resolved"!==this.deferred.embedded.state()&&(this.renderContent(),this.deferred.embedded.resolve())},linkElements:function(){var i=this,o=void 0,r={},a=void 0;(o=i.container.find("[data-customize-setting-link], [data-setting-property-link]")).each(function(){var t,n=c(this),e=void 0;if(!n.data("customizeSettingLinked")){if(n.data("customizeSettingLinked",!0),n.is(":radio")){if(e=n.prop("name"),r[e])return;r[e]=!0,n=o.filter('[name="'+e+'"]')}if(t=n.data("settingPropertyLink"))return(a=new p.Element(n)).bind(function(t,e){return i.savePropertyValue(t,e,n)}),i.elements[t]=[],void i.elements[t].push(a);(a=new p.Element(n)).bind(function(t,e){return i.saveValue(t,e,n)}),i.elements.push(a)}})},responsiveEvents:function(){this.container.find(".jupiterx-responsive-switcher a").on("click",function(t){p.previewedDevice.set(c(t.currentTarget).data("device"))})},previewRedirectionEvents:function(){var e=this;e.container.find(".jupiterx-renew-preview").on("change",function(t){e.redirectOptionPreview(e.params.section,t.target.getAttribute("data-customize-setting-link"),t.target.value)})},redirectOptionPreview:function(t,e,n){var i=new URL(p.previewer.previewUrl.get());i.searchParams.set("jupiterx",t),i.searchParams.set(e,n),p.previewer.previewUrl.set(i.toString())},unitsEvents:function(){var e=this.container.find(".jupiterx-control-units-container");c(document.body).on("click",function(t){t.target.closest(".jupiterx-control-unit-selector")||e.find(".jupiterx-control-unit-selector").removeClass("open")}),_.each(e,function(t){var e=c(t),n=e.find("input[type=hidden]"),i=e.find(".jupiterx-control-unit-selector"),o=i.find(".selected-unit");o[0].classList.contains("disabled")||i.on("click","li",function(t){if(i.toggleClass("open"),!t.target.classList.contains("selected-unit")){var e=t.target.innerText.toLowerCase();o.text(e),n.val(e).trigger("change")}})})},unitInputValidate:function(){var t=this.container.find(".jupiterx-input-control:not(.jupiterx-text-control)");_.each(t,function(t){var e=c(t),n=e.find("input[type=text]"),i=e.find(".jupiterx-control-units-container").find(".selected-unit"),o=i.text();n.on("keyup focus blur",function(){var t=n.val();!isNaN(parseFloat(t))&&isFinite(t)||_.isEmpty(t)?"-"===i.text()&&i.text(o):i.text("-")})})},stepizeInputs:function(){var t=[];t.push(this.container.find("input.jupiterx-input-control-input")),t.push(this.container.filter(".customize-control-jupiterx-box-model").find("input.jupiterx-box-model-control-input")),_.each(t,function(t){(t=c(t)).stepper({decimals:1,min:0,max:1e3,step:.1})})},saveValue:function(t,e,n){var i,o=this,r=void 0,a=void 0;if(t!==e){if(_.isUndefined(o.filterData)||(t=o.filterData(t)),r=t,i=n.data("settingViewportLink"))return a=o.setting.get(),(r=_.extend({},a))[i]=t,void o.setting.set(r);o.setting.set(r)}},savePropertyValue:function(t,e,n){var i,o,r,a=this,s=void 0;if(t!==e){if(_.isUndefined(a.filterData)||(t=a.filterData(t)),i=n.data("settingViewportLink"),o=n.data("settingPropertyLink"),r=a.setting.get(),s=_.extend({},r),i)return s[i]=_.extend({},r[i]),s[i][o]=t,void a.setting.set(s);s[o]=t,a.setting.set(s)}},actuallyReady:function(){}}),o.TemplateControl=o.Control.extend({addControl:function(t,e){var n,i=void 0,o=void 0,r=void 0,a=void 0;n="customize-control-"+t.type+"-content",document.getElementById("tmpl-"+n)&&(e=e||this.container.find(".jupiterx-group-controls"),(t=_.defaults(t,{column:12,cssClass:""})).link='data-customize-setting-link="'+t.id+'" '+(t.link?t.link:""),_.isObject(t.inputAttrs)&&(t.inputAttrs=_.map(t.inputAttrs,function(t,e){return e+'="'+t+'"'}).join(" ")),_.isObject(t.controlAttrs)&&(t.controlAttrs=_.map(t.controlAttrs,function(t,e){return e+'="'+t+'"'}).join(" ")),o=_.compact(["jupiterx-col-"+t.column,"customize-control customize-control-"+t.type,t.cssClass,t.property?this.params.type+"-control-"+t.property.replace(/_/g,"-"):"",t.responsive?"customize-control-responsive":""]),r=c("<li></li>",{class:o.join(" ")}),i=s.template(n),r.append(i(t)),e.append(r),this.linkElements(t,r),(a=u[t.type])&&a.ready&&a.ready.call({container:r,params:t}))},linkElements:function(i,t){if(!_.isEmpty(i)&&!_.isEmpty(t)){var o,r=this,e=void 0,a={},s=void 0;e=t.find("[data-customize-setting-link], [data-setting-property-link]"),o=i.property,r.elements[o]=[],e.each(function(){var n=c(this),t=void 0;if(!n.data("customizeSettingLinked")){if(n.data("customizeSettingLinked",!0),n.is(":radio")){if(t=n.prop("name"),a[t])return;a[t]=!0,n=e.filter('[name="'+t+'"]')}s=new p.Element(n),r.elements[o].push(s),s.bind(function(t,e){return r.saveValue(t,e,o,n,i)})}})}},saveValue:function(t,e,n,i,o){var r,a=u[o.type],s=n,c=this.params.responsive,p=void 0,l=void 0;a&&a.filterData&&(t=a.filterData.call({params:o},t)),(r=i.data("settingPropertyLink"))&&(s=s+"."+r),p=i.data("settingViewportLink"),(p=c&&!p?"desktop":p)&&(s=p+"."+s),l=function t(e,n,i){var o=e.split(".");if(i=_.extend({},i),1===o.length)return i[o[0]]=n,i;var r=o.shift();return i[r]=t(o.join("."),n,i[r]),i}(s,t,l=_.extend({},this.setting.get())),this.setting.set(l)}}),o.GroupControl=o.TemplateControl.extend({initialize:function(t,e){o.Control.prototype.initialize.call(this,t,e)},ready:function(){var e=this,t=e.params;_.each(t.fields,function(t){e.addControl(t)})}}),o.ColorControl=o.Control.extend(t("jupiterx-color")),o.ImageControl=o.Control.extend(t("jupiterx-image")),o.MulticheckControl=o.Control.extend(t("jupiterx-multicheck")),o.ChooseControl=o.Control.extend(t("jupiterx-choose")),o.InputControl=o.Control.extend(t("jupiterx-input")),o.FontControl=o.Control.extend(t("jupiterx-font")),o.ChildPopupControl=o.Control.extend(n("jupiterx-child-popup")),o.PopupControl=o.Control.extend(n("jupiterx-popup")),o.FontsControl=o.Control.extend(n("jupiterx-fonts")),o.ExceptionsControl=o.TemplateControl.extend({initialize:function(t,e){o.Control.prototype.initialize.call(this,t,e)},ready:function(){var n=this,i=n.params,t=n.setting.get();_.each(t,function(t,e){n.addException({id:e,text:i.choices[e],value:t})})},actuallyReady:function(){var i,o,r=this,e=r.params.choices,t=r.container,n=t.find(".jupiterx-exceptions-control-add"),a=n.find(".jupiterx-select-control-field"),s=void 0;i=function(t){a.find("option[value="+t+"]").remove(),s()},o=function(t){e[t]&&(a.append(new Option(e[t],t,!1,!1)),s())},s=function(){var t=a.find("option");n.toggle(0<t.length)},_.each(_.keys(r.setting.get()),function(t){i(t)}),a.select2({minimumResultsForSearch:-1,placeholder:"Add New Exception",allowClear:!0,containerCssClass:"jupiterx-select2-container",dropdownCssClass:"jupiterx-select2-dropdown",width:"100%"}).on("select2:select",function(t){t.preventDefault();var e=t.params.data,n=r.setting.get();e&&e.id&&!n[e.id]&&(r.exceptionInitialData(e),r.addException(e),i(e.id)),a.val("").change()}),n.find(".jupiterx-button").click(function(t){t.preventDefault(),a.select2("open")}),t.on("click",".jupiterx-exceptions-control-remove",function(t){if(t.preventDefault(),confirm("Are you sure you want to remove this exception?")){var e=c(t.currentTarget),n=e.data("id"),i=r.setting.get();n&&i[n]&&(r.removeException(n),e.closest(".jupiterx-exceptions-control-group").remove(),o(n)),a.val("").change()}}),a.val("").change()},addException:function(n){var i=this,t=i.params,e=i.container.find(".jupiterx-exceptions-control-items"),o=s.template("customize-jupiterx-exceptions-control-group"),r=c(o(n)),a=r.find(".jupiterx-group-controls");_.each(t.fields,function(t,e){t.property=e,t.value=n.value?n.value[e]:t.default,t.id=i.id+"_"+n.id+"_"+e,t.link='data-setting-property-link="'+n.id+"."+e+'"',i.addControl(t,a)}),e.append(r)},exceptionInitialData:function(t){var e=this.params,n=t.id,i=void 0;(i=_.extend({},this.setting.get()))[n]={},_.each(e.fields,function(t,e){i[n][e]=t.default}),this.setting.set(i)},removeException:function(t){var e=void 0;delete(e=_.extend({},this.setting.get()))[t],this.setting.set(e)},saveValue:function(t,e,n,i,o){var r,a=u[o.type];a&&a.filterData&&(t=a.filterData.call({params:o},t));r=function t(e,n,i){var o=e.split(".");if(i=_.extend({},i),1===o.length)return i[o[0]]=n,i;var r=o.shift();return i[r]=t(o.join("."),n,i[r]),i}(i.data("settingPropertyLink"),t,this.setting.get()),this.setting.set(r)}}),o.BackgroundGroupControl=o.GroupControl.extend({actuallyReady:function(){var e,t=this,n=t.setting.get(),i=t.container.find(".for-classic"),o=t.container.find(".for-gradient"),r=t.container.find(".for-video"),a=_.isUndefined(n.type)?"classic":n.type;t.params.responsive&&(a=_.isUndefined(n.desktop)||_.isUndefined(n.desktop.type)?"classic":n.desktop.type),e=function(t){t&&(i.toggleClass("hidden","classic"!==t),o.toggleClass("hidden","gradient"!==t),r.toggleClass("hidden","video"!==t))},_.each(t.elements.type,function(t){t.bind(e)}),e(a)}}),c.extend(p.sectionConstructor,{"kirki-popup":o.PopupSection,"kirki-pane":o.PaneSection}),c.extend(p.controlConstructor,{"jupiterx-text":o.Control,"jupiterx-input":o.InputControl,"jupiterx-textarea":o.Control,"jupiterx-select":o.Control,"jupiterx-toggle":o.Control,"jupiterx-choose":o.ChooseControl,"jupiterx-divider":o.Control,"jupiterx-label":o.Control,"jupiterx-position":o.Control,"jupiterx-radio-image":o.Control,"jupiterx-multicheck":o.MulticheckControl,"jupiterx-color":o.ColorControl,"jupiterx-image":o.ImageControl,"jupiterx-child-popup":o.ChildPopupControl,"jupiterx-popup":o.PopupControl,"jupiterx-box-model":o.Control,"jupiterx-fonts":o.FontsControl,"jupiterx-font":o.FontControl,"jupiterx-exceptions":o.ExceptionsControl}),c.extend(p.controlConstructor,{"jupiterx-box-shadow":o.GroupControl,"jupiterx-typography":o.GroupControl,"jupiterx-border":o.GroupControl,"jupiterx-background":o.BackgroundGroupControl}),p.bind("ready",function(){p.panel("woocommerce")&&p.panel("woocommerce").priority(285),p.section("custom_css").priority(1e3)}),p.bind("pane-contents-reflowed",function(){p.section.each(function(t){("kirki-pane"===t.params.type||"kirki-popup"===t.params.type&&t.params.hidden)&&t.headContainer.remove()})});var i=c("#customize-controls"),r=s.template("customize-jupiterx-popup-content");i.append(r()),c(".jupiterx-popup").draggable({containment:"body",handle:".jupiterx-popup-header, .jupiterx-child-popup-header"})}(jQuery,wp);